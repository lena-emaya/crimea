<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<title>Update a choropleth layer by zoom level</title>
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.1/mapbox-gl.css' rel='stylesheet' />
<style>
body { margin:0; padding:0; }
#map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
 
<style>

.container{
    position: absolute;
}    
 
h1{
    left: 10px;  
}

.legend {
background-color: #fff;
border-radius: 3px;

box-shadow: 0 1px 2px rgba(0,0,0,0.10);
font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
padding: 10px;

left: 10px;
z-index: 1;
}
 
.legend h4 {
margin: 0 0 10px;
}
 
.legend div span {
border-radius: 50%;
display: inline-block;
height: 10px;
margin-right: 5px;
width: 10px;
}
 
</style>
 
<div id='map'></div>
<div class="container"> 
<h1>Крым уцуц</h1>
<div id='county-legend' class='legend' style='display: none;'>
<h4>инфа</h4>
<div><span style='background-color: #723122'></span>какие-то территории</div>
<div><span style='background-color: #8B4225'></span>еще какие-то</div>
<div><span style='background-color: #A25626'></span>и еще</div>
<div><span style='background-color: #B86B25'></span>и еще</div>

</div>
</div>
 
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoibGVuYWVtYXlhIiwiYSI6ImNpa3VhbXE5ZjAwMXB3eG00ajVyc2J6ZTIifQ.kmZ4yVcNrupl4H8EonM3aQ';
var map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/lenaemaya/cjtxwb9bn0rg01fo9vfio37jc',
center: [34.467223, 44.847636],
minZoom: 6,
zoom: 7.75
});
 
var zoomThreshold = 4;
 
map.on('load', function() {
    var countyLegendEl = document.getElementById('county-legend');
    countyLegendEl.style.display = 'block';
map.addSource('population', {
'type': 'vector',
'url': 'mapbox://mapbox.660ui7x6'
});
 
map.addLayer({
'id': 'state-population',
'source': 'population',
'source-layer': 'state_county_population_2014_cen',
'type': 'fill',
'filter': ['==', 'isState', true],
'paint': {
'fill-color': [
'interpolate',
['linear'],
['get', 'population'],
0, '#F2F12D',
500000, '#EED322',
750000, '#E6B71E',
1000000, '#DA9C20',
2500000, '#CA8323',
5000000, '#B86B25',
7500000, '#A25626',
10000000, '#8B4225',
25000000, '#723122'
],
'fill-opacity': 0.75
}
}, 'waterway-label');
 
});
 
 
</script>
 
</body>
</html>